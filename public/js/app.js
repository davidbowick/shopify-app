!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t,a){a(1),e.exports=a(2)},function(e,t){var a=$('<svg width="30px"  height="30px"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-rolling" style="background: none;"><circle cx="50" cy="50" fill="none" ng-attr-stroke="{{config.color}}" ng-attr-stroke-width="{{config.width}}" ng-attr-r="{{config.radius}}" ng-attr-stroke-dasharray="{{config.dasharray}}" stroke="#ffffff" stroke-width="10" r="25" stroke-dasharray="117.80972450961724 41.269908169872416" transform="rotate(41.2639 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></circle></svg>');function r(e,t,a){var r;return function(){var n=this,d=arguments,i=function(){r=null,a||e.apply(n,d)},o=a&&!r;clearTimeout(r),r=setTimeout(i,t),o&&e.apply(n,d)}}function n(){$(".draft-order__saved-product").length?d("#create-draft-order"):i("#create-draft-order"),$(".product-list__product").length?d("#clear-results"):i("#clear-results"),$(".product-list__product").length?$(".product-list__hidden").removeClass("nopacity"):$(".product-list__hidden").addClass("nopacity")}function d(e){$(e).fadeIn()}function i(e){$(e).fadeOut()}var o=function(e,t,a){for(var r,n=a||window,d=0;n&&(r=e[d]);d++)n=r in n?n[r]:t?n[r]={}:void 0;return n};jQuery.obj=function(e,t,a,r){if(null!=t){var n=e.split("."),d=n.pop(),i=o(n,!0,r);return i&&d?i[d]=t:void 0}return o(e.split("."),a,r)};var s="https://draftorders.wick-apps.com";$(function(){var e="";$("#add-product").focus(),$("#add-product").keyup(r(function(){var t=$(this).val();t.length>=3&&e!=t&&(e=t,$(".main-preloader").fadeIn(),$.ajax({url:s+"/products/"+t,success:function(e){$(".product-list__hidden").empty(),$(e).each(function(e,t){var a=t.node.title,r=(t.node.id,t.node.handle,t.node.featuredImage.transformedSrc),n=$('<div class="product-list__product flex"></div>'),d=($('<div class="product-list__image"><img src="'+r+'" width="90" /></div>').appendTo(n),$('<div class="product-list__details"></div></div>').appendTo(n)),i=($('<div class="draft-order__title"><h5>'+a+"</h5></div>").appendTo(d),$('<select class="variant-list__variants"></select>').appendTo(d)),o=$('<div class="flex flex--wrap grid--half-gutters"></div>').appendTo(d);a.indexOf("Special Order")>-1&&function(e){var t=$('<div class="special__input grid__item field"><label>Color</label><select class="color" name="color[]"></select></div>').appendTo(e);$.each(["Oil Rubbed Bronze","Heavy Bronze","Silver Pewter","Black","Pewter"],function(e,a){$(t).find("select").append('<option value="'+a.replace('"','"')+'">'+a+"</option>")});var a=$('<div class="special__input grid__item field"><label>Glass</label><select class="glass" name="glass[]"></select></div>').appendTo(e);$.each(["Low-E","Sandblast/Frost","Flemish","Rain","Aquatex","Rainbow","Ford Blue","Tea","Water Cube"],function(e,t){$(a).find("select").append('<option value="'+t.replace('"','"')+'">'+t+"</option>")});var r=$('<div class="special__input grid__item field"><label>Swing</label><select name="swing[]"></select></div>').appendTo(e);$.each(["Left-Hand - In swing","Left-Hand - Out swing","Right-Hand - In swing","Right-Hand - Out swing"],function(e,t){$(r).find("select").append('<option value="'+t.replace('"','"')+'">'+t+"</option>")})}(o),$(".product-list__hidden").append(n),$(t.node.variants.edges).each(function(e,t){var n=t.node.title,d=t.node.id;$(i).append('<option data-image="'+r+'" data-product-title="'+a+'" data-variant-title="'+n+'" data-variant-id="'+d+'" value="'+d+'">'+n+"</option>")}),$(i).wrap('<div class="field"/>');$('<a href="#" class="product-list__add btn">Add</a>').appendTo(d);$(".main-preloader").fadeOut()}),n()},error:function(e){console.log(e)}}))},500)),$(document).on("click",".product-list__add",function(e){e.preventDefault();var t=$(this).closest(".product-list__product"),a=t.find(".variant-list__variants option:selected"),r=a.data("variant-id").split("/").pop(),d=a.data("product-title"),i=a.data("variant-title"),o=a.data("image"),s=t.find(".special__input");console.log(r,d);var l=$('<div class="draft-order__saved-product flex" style="display: none;"></div>').appendTo(".draft-order__saved-products"),c=($('<div class="draft-order__image"><img src="'+o+'"></div>').appendTo(l),$('<div class="draft-order__description"></div>').appendTo(l)),u=$('<div class="draft-order__title"><h5>'+d+"</h5></div>").appendTo(c),p=($("<div>"+i+"</div>").appendTo(u),$('<div class="flex flex--wrap grid--half-gutters"></div>').appendTo(c));$('<div class="grid__item field"><label>Qty</label><input class="variant-quantity" name="quantity[]" type="number" value="1"></div>').appendTo(p),$('<input type="hidden" value="'+r+'" class="variant-id" name="variant_id[]">').appendTo(p);if(s.length){var f=[];s.each(function(e,t){var a=$(this).find("option:selected").text();myProperty=$(this).find("label").text(),f.push(a),p.append('<input type="hidden" class="'+myProperty.toLowerCase()+'" name="properties['+myProperty+']" value="'+a.replace('"',"˝")+'">')});$("<p>"+f.join(" / ")+"</p>").appendTo(u)}$('<a class="draft-order__remove" href="#">Remove</a>').appendTo(c);$(l).fadeIn(),n()}),$("#clear-results").on("click",function(e){e.preventDefault(),$(".product-list__hidden").empty(),n()}),$(document).on("click",".draft-order__remove",function(e){e.preventDefault(),$(this).closest(".draft-order__saved-product").remove(),n()}),$("#create-draft-order").submit(function(e){$("#createDraftOrder").empty().append(a),e.preventDefault();var t={draft_order:{line_items:[]}},r=$(".draft-order__saved-product").length;$(".draft-order__saved-product").each(function(e,a){e===r-1&&$(this).addClass(".last");var n=$(this),d=n.find(".variant-id").val(),i=n.find(".variant-quantity").val(),o=n.find(".color").length?n.find(".color").val():"",s=n.find(".glass").length?n.find(".glass").val():"",l=n.find(".swing").length?n.find(".swing").val():"",c={variant_id:parseInt(d),quantity:parseInt(i),properties:[]};t.draft_order.line_items.push(c);var u=c.properties;if(o){var p={name:"Color",value:o};u.push(p)}if(s){p={name:"Glass",value:s};u.push(p)}if(l){p={name:"Swing",value:l};u.push(p)}if($("#current-customer .user-list__user-info").length){var f={id:$("#current-customer").data("customer-id")};t.draft_order.customer=f,t.draft_order.use_customer_default_address=!0}}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()}}),console.log(t),$.ajax({method:"POST",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},url:"/draft-order",dataType:"json",contentType:"application/json; charset=UTF-8",data:JSON.stringify(t),success:function(e){console.log("successfully sent!"),$("#createDraftOrder").hide(),$("#createDraftOrder").find("svg").hide();var t=e.body.draft_order.id,a=$("#gotoDraftOrder a").attr("href")+t;$("#gotoDraftOrder").show().find("a").attr("href",a)},error:function(e){console.log("errr, nope")}})}),$(document).on("click",".btn--start-over",function(e){e.preventDefault(),$(".draft-order__saved-products").empty(),$(".product-list__hidden").empty(),n()}),$("#addCustomerForm").submit(function(e){return e.preventDefault(),!1}),$(".add-customer-form__input").keyup(r(function(){var t=$(this).val();if(t.length>=3&&e!=t){e=t;$.ajax({url:s+"/customer/"+t,success:function(e){$(".add-customer-form__results").empty(),$(e).each(function(e,t){console.log(t.node.displayName);var a=t.node.displayName,r=t.node.id.replace("gid://shopify/Customer/","");$email=t.node.email,$gravatar=t.node.hash;var n=$('<div class="user-list__user-wrapper"></div>').appendTo(".add-customer-form__results"),d=$('<button data-customer-id="'+r+'" class="user-list__user"></button>').appendTo(n),i=$('<div class="flex flex--align-center"></div>').appendTo(d),o=($('<div class="user-list__user-image"><img width="40" src="'+$gravatar+'"></div>').appendTo(i),$('<div data-customer-id="'+r+'" class="user-list__user-info"></div>').appendTo(i));$('<div class="user-list__name">'+a+"</div>").appendTo(o),$('<div class="user-list__name">'+$email+"</div>").appendTo(o);$(".main-preloader").fadeOut()}),$(".add-customer-form__results").fadeIn(),n()},error:function(e){console.log(e)}})}},500)),$(document).on("click",".user-list__user",function(e){e.preventDefault();var t=$(this),a=t.data("customer-id"),r=t.html();$("#addCustomerForm").hide(),$(".btn--add-customer").hide(),$(".add-customer-form__results").hide().empty(),$("#current-customer").append(r).fadeIn().attr("data-customer-id",a)}),n()})},function(e,t){}]);